import{_ as p,c as d,a as t,d as n,b as a,e as s,w as c,r as o,o as r}from"./app-YEeKhUZS.js";const u={},h={id:"entity",tabindex:"-1"},g={class:"header-anchor",href:"#entity"};function b(f,e){const i=o("Badge"),l=o("RouteLink");return r(),d("div",null,[e[2]||(e[2]=t("h1",{id:"trigger-state",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#trigger-state"},[t("span",null,"Trigger: state")])],-1)),e[3]||(e[3]=t("p",null,"The Trigger: State node functions similarly to the State Changed Node but provides advanced functionality for common automation use cases. This node allows for more complex conditions and actions based on entity state changes, making it a powerful tool for creating detailed and nuanced automations.",-1)),e[4]||(e[4]=t("h2",{id:"configuration",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#configuration"},[t("span",null,"Configuration")])],-1)),t("h3",h,[t("a",g,[t("span",null,[e[0]||(e[0]=n("Entity ")),a(i,{text:"required"})])])]),e[5]||(e[5]=s('<ul><li><p>Type: <code>string</code></p><p>The entity ID is used to listen for state changes. This can be a entity ID, regex, or a substring. If a regex or substring is used, the node will listen for all entities that match.</p></li></ul><p>Example:</p><ul><li><code>light.kitchen</code> (entity) listens for state changes of the <code>light.kitchen</code> entity</li><li><code>^light.*</code> (regex) listens for state changes of all entities that start with <code>light.</code></li><li><code>light</code> (substring) listens for state changes of all entities that contain <code>light</code> in the entity ID</li></ul><h3 id="state-type" tabindex="-1"><a class="header-anchor" href="#state-type"><span>State Type</span></a></h3><ul><li>Type: <code>string</code></li><li>Values: <code>string|number|boolean</code></li><li>Default: <code>string</code></li></ul><p>Convert the state of the entity to the selected type. Boolean will be converted to true based on if the string is equal by default to (<code>y|yes|true|on|home|open</code>). Original value stored in msg.data.original_state</p><h3 id="conditions" tabindex="-1"><a class="header-anchor" href="#conditions"><span>Conditions</span></a></h3><p>This node has two default outputs &quot;allowed&quot; and &quot;blocked&quot;. If all the conditions are true the default message will be sent to the &quot;allowed&quot; output otherwise, it will be sent to the &quot;blocked&quot; output.</p><p><strong>See Also:</strong></p>',9)),t("ul",null,[t("li",null,[a(l,{to:"/guide/conditionals.html"},{default:c(()=>e[1]||(e[1]=[n("Conditionals")])),_:1})])]),e[6]||(e[6]=s(`<h3 id="custom-outputs" tabindex="-1"><a class="header-anchor" href="#custom-outputs"><span>Custom Outputs</span></a></h3><p>All the above conditions need to be true for any custom outputs to be sent, having zero conditions is a valid option. Each custom output can send the default message or a custom message. Also, each one can have its constraint on whether or not to be sent.</p><h3 id="output-on-connect" tabindex="-1"><a class="header-anchor" href="#output-on-connect"><span>Output on connect</span></a></h3><ul><li>Type: <code>boolean</code></li></ul><p>Output once on startup/deployment.</p><h3 id="enable-input" tabindex="-1"><a class="header-anchor" href="#enable-input"><span>Enable input</span></a></h3><ul><li>Type: <code>boolean</code></li></ul><p>Enable the input to be used to send a message to the node.</p><h3 id="output-debug-information" tabindex="-1"><a class="header-anchor" href="#output-debug-information"><span>Output debug information</span></a></h3><ul><li>Type: <code>boolean</code></li></ul><p>Output debug information to the debug tab.</p><h3 id="expose-to-home-assistant" tabindex="-1"><a class="header-anchor" href="#expose-to-home-assistant"><span>Expose to Home Assistant</span></a></h3><ul><li>Type: <code>boolean</code></li></ul><p>Expose the node to Home Assistant.</p><h2 id="input" tabindex="-1"><a class="header-anchor" href="#input"><span>Input</span></a></h2><p>Input is disabled by default. It can be enabled using the <code>Enable Input</code> option. Input can be used to <a href="#enable-disable">enable/disable</a> the node or for <a href="#testing">testing</a>.</p><h3 id="enable-disable" tabindex="-1"><a class="header-anchor" href="#enable-disable"><span>Enable / Disable</span></a></h3><ul><li>Type: <code>string</code></li></ul><p>If the incoming payload or message is a string and equal to <code>enable</code> or <code>disable</code> then set the node accordingly. Saves over restarts.</p><h2 id="output" tabindex="-1"><a class="header-anchor" href="#output"><span>Output</span></a></h2><h3 id="topic" tabindex="-1"><a class="header-anchor" href="#topic"><span>topic</span></a></h3><ul><li>Type: <code>string</code></li></ul><p>The entity_id that triggered the node</p><h3 id="payload" tabindex="-1"><a class="header-anchor" href="#payload"><span>payload</span></a></h3><ul><li>Type: <code>string</code></li></ul><p>The state as sent by home assistant</p><h3 id="data" tabindex="-1"><a class="header-anchor" href="#data"><span>data</span></a></h3><ul><li>Type: <code>object</code></li></ul><p>The original home assistant event containing <code>entity_id</code> <code>new_state</code> and <code>old_state</code> properties</p><h2 id="testing" tabindex="-1"><a class="header-anchor" href="#testing"><span>Testing</span></a></h2><p>To test automation without having to manually change the state in home assistant send an input <code>payload</code> as an object which contains <code>entity_id</code>, <code>new_state</code>, and <code>old_state</code> properties. This will trigger the node as if the event came from Home Assistant.</p><div class="language-json" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_entity&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;old_state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;new_state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><ul><li><a href="https://home-assistant.io/docs/configuration/state_object" target="_blank" rel="noopener noreferrer">HA State Object</a></li></ul>`,34))])}const y=p(u,[["render",b],["__file","trigger-state.html.vue"]]),k=JSON.parse('{"path":"/node/trigger-state.html","title":"Trigger: state","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Configuration","slug":"configuration","link":"#configuration","children":[{"level":3,"title":"Entity","slug":"entity","link":"#entity","children":[]},{"level":3,"title":"State Type","slug":"state-type","link":"#state-type","children":[]},{"level":3,"title":"Conditions","slug":"conditions","link":"#conditions","children":[]},{"level":3,"title":"Custom Outputs","slug":"custom-outputs","link":"#custom-outputs","children":[]},{"level":3,"title":"Output on connect","slug":"output-on-connect","link":"#output-on-connect","children":[]},{"level":3,"title":"Enable input","slug":"enable-input","link":"#enable-input","children":[]},{"level":3,"title":"Output debug information","slug":"output-debug-information","link":"#output-debug-information","children":[]},{"level":3,"title":"Expose to Home Assistant","slug":"expose-to-home-assistant","link":"#expose-to-home-assistant","children":[]}]},{"level":2,"title":"Input","slug":"input","link":"#input","children":[{"level":3,"title":"Enable / Disable","slug":"enable-disable","link":"#enable-disable","children":[]}]},{"level":2,"title":"Output","slug":"output","link":"#output","children":[{"level":3,"title":"topic","slug":"topic","link":"#topic","children":[]},{"level":3,"title":"payload","slug":"payload","link":"#payload","children":[]},{"level":3,"title":"data","slug":"data","link":"#data","children":[]}]},{"level":2,"title":"Testing","slug":"testing","link":"#testing","children":[]},{"level":2,"title":"References","slug":"references","link":"#references","children":[]}],"git":{"updatedTime":1723606857000,"contributors":[{"name":"Jason","email":"37859597+zachowj@users.noreply.github.com","commits":11},{"name":"Mauricio Bonani","email":"bonanitech@gmail.com","commits":1}]},"filePathRelative":"node/trigger-state.md"}');export{y as comp,k as data};
